var Calculator=function(){function t(t){h.push(t),console.log("=>",t),a=h.reduce(function(t,e){return t+e},""),"undefined"==typeof p?(d.textContent=a,g.textContent=a):(b||(d.textContent="",b=!0),d.textContent=d.textContent+t,g.textContent=a),"+"!=t&&"*"!=t&&"/"!=t&&"-"!=t||(d.textContent=t,b=!1,p=a.split(t))}function e(t){for(var e=[],n=[],o=0;o<t.length;o++)"+"!=t[o]&&"*"!=t[o]&&"/"!=t[o]&&"-"!=t[o]?e.push(t[o]):(n.push(Number(e.join(""))),n.push(t[o]),e=[]);return n.push(Number(e.join(""))),n}function n(t){for(var e=[],n=[],o=0;o<t.length;o++)"number"==typeof t[o]?e.push(t[o]):n.push(t[o]);var o=0;do"+"==n[o]&&(e[0]=e[0]+e[1]),"-"==n[o]&&(e[0]=e[0]-e[1]),"*"==n[o]&&(e[0]=e[0]*e[1]),"/"==n[o]&&(e[0]=e[0]/e[1]),e.splice(1,1),o++;while(o<n.length);return c=e[0],c=Math.round(100*c)/100,console.log("result=>",c),c}var o,l,u,r,a,c,i={},s=document.getElementById("calculator"),d=document.getElementById("display"),g=document.getElementById("sub-display"),b=!1,f=!1,h=[],p=[];return s.onfocus=function(){this.blur()},i.init=function(){s.addEventListener("click",function(a){(a.target.getAttribute("data-btn-value")||a.target.getAttribute("data-btn-action"))&&(o=a.target,l=o.attributes[1].name,u=o.getAttribute(l),r=o.classList[0],"btn"==r&&("data-btn-value"==l&&("."!==u?t(u):f?console.log("the decimal btn is frozen"):(console.log("the decimal btn is not frozen"),t(u),f=!0)),"data-btn-action"==l&&("+"!=u&&"*"!=u&&"/"!=u&&"-"!=u||(console.log("** "+u+" **"),t(u)),"="==u&&(f=!1,c=n(e(h)),d.textContent=c,g.textContent+=u+c),"clear"==u&&(console.log("** clear **"),g.textContent="0",d.textContent="0",h=[],b=!1,console.log("clear init =",b)),f=!1)))})},i}();